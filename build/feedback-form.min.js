/*! 
 * angular-feedback-form v0.0.1
 * https://github.com/ediri/angular-feedback-form
 * Copyright (c) 2016 ediri
 * License: MIT
 */
!function(){"use strict";angular.module("feedbackForm",[]).directive("feedbackbutton",["$window",function(a){return{restrict:"E",replace:!0,scope:{buttonText:"@",modalId:"@"},link:function(a,b,c){},template:'<button type="button" class="btn btn-primary feedback" data-toggle="modal" data-target="#{{modalId}}">{{buttonText}}</button>'}}]).directive("feedbackmodal",["$window","$http","$timeout",function(a,b,c){return{restrict:"E",replace:!0,scope:{modalId:"@",modalHeaderTitle:"@",modalInfoText:"@",postUrl:"@",user:"@"},controller:["$scope",function(a){a.feedback={user:a.user},a.submitForm=function(d){var e=a[d];e.$valid&&(angular.element("#submitFeedbackButton").prop("disabled",!0),b.post(a.postUrl,a.feedback).success(function(b,d,e,f){a.succesMessage="Thanks for providing your feedback! This window will automatically close in 5 seconds.",c(function(){angular.element("#"+a.modalId).modal("hide")},5e3)}).error(function(b,c,d,e){a.error=b,angular.element("#submitFeedbackButton").prop("disabled",!1)}))}}],controllerAs:"ctrl",link:function(a,b,c){$(b).on("show.bs.modal",function(b){a.feedback={user:a.user},a.succesMessage=null,a.feedbackForm.$setPristine(),a.$apply(),angular.element("#user").trigger("focus")}),$(b).on("shown.bs.modal",function(a){angular.element("#user").trigger("focus")})},template:'<div id="{{modalId}}" class="modal fade" role="dialog">                             <div class="modal-dialog">                              <div class="modal-content">                                <div class="alert alert-success alert-float" role="alert" ng-show="succesMessage">                                 <p>{{succesMessage}}</p>                                </div>                               <div class="modal-header">                                <button type="button" class="close" data-dismiss="modal">&times;</button>                                <h3 class="modal-title">{{modalHeaderTitle}}</h3>                               </div>                               <form class="form-horizontal" name="feedbackForm" ng-submit="submitForm(\'feedbackForm\')" novalidate>                               <div class="modal-body">                                <div class="alert alert-info" role="alert">                                 <p>{{modalInfoText}}</p>                                </div>                                <div class="alert alert-danger" role="alert" ng-show="error">                                 <p>{{error}}</p>                                </div>                                   <div class="form-group" ng-class="{ \'has-error\' : feedbackForm.user.$invalid && !feedbackForm.user.$pristine }">                                     <label class="control-label col-sm-3" for="user">Name</label>                                     <div class="col-sm-9">                                      <input type="text" class="form-control" name="user" ng-model="feedback.user" id="user" required>                                     </div>                                   </div>                                   <div class="form-group" ng-class="{ \'has-error\' : feedbackForm.description.$invalid && !feedbackForm.description.$pristine }">                                     <label class="control-label col-sm-3" for="description">Beschreibung</label>                                     <div class="col-sm-9">                                      <textarea class="form-control" name="description" ng-model="feedback.description"  id="description" rows="12" wrap="virtual" required> </textarea>                                     </div>                                  </div>                               </div>                               <div class="modal-footer">                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>                                <button type="submit" class="btn btn-primary" ng-disabled="feedbackForm.$invalid" id="submitFeedbackButton">OK</button>                               </div>                              </div>                             </div>                            </div>'}}])}();